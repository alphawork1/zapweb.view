/*
	Masked Input plugin for jQuery
	Copyright (c) 2007-2011 Josh Bush (digitalbush.com)
	Licensed under the MIT license (http://digitalbush.com/projects/masked-input-plugin/#license) 
	Version: 1.3
*/
yum.define(function(context){
	/**
	 * Linha abaixo mantem compatibilidade com versoes do jquery 1.9 ou superior
	*/
	jQuery.browser={};(function(){jQuery.browser.msie=false;
	jQuery.browser.version=0;if(navigator.userAgent.match(/MSIE ([0-9]+)\./)){
	    jQuery.browser.msie = true; jQuery.browser.version = RegExp.$1;
	}
	})();

	(function(a){a.fn.maskMoney=function(b){b=a.extend({symbol:"US$",showSymbol:false,symbolStay:false,thousands:",",decimal:".",precision:2,defaultZero:true,allowZero:false,allowNegative:false},b);return this.each(function(){var l=a(this);var d=false;function n(){d=true}function i(){d=false}function p(y){y=y||window.event;var s=y.charCode||y.keyCode||y.which;if(s==undefined){return false}if(l.attr("readonly")&&(s!=13&&s!=9)){return false}if(s<48||s>57){if(s==45){n();l.val(f(l));return false}else{if(s==43){n();l.val(l.val().replace("-",""));return false}else{if(s==13||s==9){if(d){i();a(this).change()}return true}else{if(s==37||s==39){return true}else{k(y);return true}}}}}else{if(l.val().length>=l.attr("maxlength")){return false}else{k(y);var v=String.fromCharCode(s);var r=l.get(0);var w=l.getInputSelection(r);var u=w.start;var t=w.end;r.value=r.value.substring(0,u)+v+r.value.substring(t,r.value.length);e(r,u+1);n();return false}}}function j(w){w=w||window.event;var s=w.charCode||w.keyCode||w.which;if(s==undefined){return false}if(l.attr("readonly")&&(s!=13&&s!=9)){return false}var r=l.get(0);var v=l.getInputSelection(r);var u=v.start;var t=v.end;if(s==8){k(w);if(u==t){r.value=r.value.substring(0,u-1)+r.value.substring(t,r.value.length);u=u-1}else{r.value=r.value.substring(0,u)+r.value.substring(t,r.value.length)}e(r,u);n();return false}else{if(s==9){if(d){a(this).change();i()}return true}else{if(s==46||s==63272){k(w);if(r.selectionStart==r.selectionEnd){r.value=r.value.substring(0,u)+r.value.substring(t+1,r.value.length)}else{r.value=r.value.substring(0,u)+r.value.substring(t,r.value.length)}e(r,u);n();return false}else{return true}}}}function m(t){var r=o();if(l.val()==r){l.val("")}else{if(l.val()==""&&b.defaultZero){l.val(c(r))}else{l.val(c(l.val()))}}if(this.createTextRange){var s=this.createTextRange();s.collapse(false);s.select()}}function h(r){if(a.browser.msie){p(r)}if(l.val()==""||l.val()==c(o())||l.val()==b.symbol){if(!b.allowZero){l.val("")}else{if(!b.symbolStay){l.val(o())}else{l.val(c(o()))}}}else{if(!b.symbolStay){l.val(l.val().replace(b.symbol,""))}else{if(b.symbolStay&&l.val()==b.symbol){l.val(c(o()))}}}}function k(r){if(r.preventDefault){r.preventDefault()}else{r.returnValue=false}}function e(r,t){var s=l.val().length;l.val(g(r.value));var u=l.val().length;t=t-(s-u);l.setCursorPosition(t)}function g(B){B=B.replace(b.symbol,"");var r="0123456789";var y=B.length;var A="",C="",w="";if(y!=0&&B.charAt(0)=="-"){B=B.replace("-","");if(b.allowNegative){w="-"}}if(y==0){if(!b.defaultZero){return C}C="0.00"}for(var x=0;x<y;x++){if((B.charAt(x)!="0")&&(B.charAt(x)!=b.decimal)){break}}for(;x<y;x++){if(r.indexOf(B.charAt(x))!=-1){A+=B.charAt(x)}}var u=parseFloat(A);u=isNaN(u)?0:u/Math.pow(10,b.precision);C=u.toFixed(b.precision);x=b.precision==0?0:1;var s,z=(C=C.split("."))[x].substr(0,b.precision);for(s=(C=C[0]).length;(s-=3)>=1;){C=C.substr(0,s)+b.thousands+C.substr(s)}return(b.precision>0)?c(w+C+b.decimal+z+Array((b.precision+1)-z.length).join(0)):c(w+C)}function q(){var r=l.val();l.val(g(r))}function o(){var r=parseFloat("0")/Math.pow(10,b.precision);return(r.toFixed(b.precision)).replace(new RegExp("\\.","g"),b.decimal)}function c(r){if(b.showSymbol){if(r.substr(0,b.symbol.length)!=b.symbol){return b.symbol+r}}return r}function f(s){if(b.allowNegative){var r=s.val();if(s.val()!=""&&s.val().charAt(0)=="-"){return s.val().replace("-","")}else{return"-"+s.val()}}else{return s.val()}}l.bind("keypress.maskMoney",p);l.bind("keydown.maskMoney",j);l.bind("blur.maskMoney",h);l.bind("focus.maskMoney",m);l.bind("mask",q);l.one("unmaskMoney",function(){l.unbind(".maskMoney");if(a.browser.msie){this.onpaste=null}else{if(a.browser.mozilla){this.removeEventListener("input",h,false)}}})})};a.fn.unmaskMoney=function(){return this.trigger("unmaskMoney")};a.fn.mask=function(){return this.trigger("mask")};a.fn.setCursorPosition=function(b){this.each(function(d,e){if(e.setSelectionRange){e.focus();e.setSelectionRange(b,b)}else{if(e.createTextRange){var c=e.createTextRange();c.collapse(true);c.moveEnd("character",b);c.moveStart("character",b);c.select()}}});return this};a.fn.getInputSelection=function(f){var i=0,d=0,h,e,c,b,g;if(typeof f.selectionStart=="number"&&typeof f.selectionEnd=="number"){i=f.selectionStart;d=f.selectionEnd}else{e=document.selection.createRange();if(e&&e.parentElement()==f){b=f.value.length;h=f.value.replace(/\r\n/g,"\n");c=f.createTextRange();c.moveToBookmark(e.getBookmark());g=f.createTextRange();g.collapse(false);if(c.compareEndPoints("StartToEnd",g)>-1){i=d=b}else{i=-c.moveStart("character",-b);i+=h.slice(0,i).split("\n").length-1;if(c.compareEndPoints("EndToEnd",g)>-1){d=b}else{d=-c.moveEnd("character",-b);d+=h.slice(0,d).split("\n").length-1}}}}return{start:i,end:d}}})(jQuery);
	(function (a) { var b = (a.browser.msie ? "paste" : "input") + ".mask", c = window.orientation != undefined; a.mask = { definitions: { 9: "[0-9]", a: "[A-Za-z]", "*": "[A-Za-z0-9]" }, dataName: "rawMaskFn" }, a.fn.extend({ caret: function (a, b) { if (this.length != 0) { if (typeof a == "number") { b = typeof b == "number" ? b : a; return this.each(function () { if (this.setSelectionRange) this.setSelectionRange(a, b); else if (this.createTextRange) { var c = this.createTextRange(); c.collapse(!0), c.moveEnd("character", b), c.moveStart("character", a), c.select() } }) } if (this[0].setSelectionRange) a = this[0].selectionStart, b = this[0].selectionEnd; else if (document.selection && document.selection.createRange) { var c = document.selection.createRange(); a = 0 - c.duplicate().moveStart("character", -1e5), b = a + c.text.length } return { begin: a, end: b } } }, unmask: function () { return this.trigger("unmask") }, mask: function (d, e) { if (!d && this.length > 0) { var f = a(this[0]); return f.data(a.mask.dataName)() } e = a.extend({ placeholder: "_", completed: null }, e); var g = a.mask.definitions, h = [], i = d.length, j = null, k = d.length; a.each(d.split(""), function (a, b) { b == "?" ? (k--, i = a) : g[b] ? (h.push(new RegExp(g[b])), j == null && (j = h.length - 1)) : h.push(null) }); return this.trigger("unmask").each(function () { function v(a) { var b = f.val(), c = -1; for (var d = 0, g = 0; d < k; d++) if (h[d]) { l[d] = e.placeholder; while (g++ < b.length) { var m = b.charAt(g - 1); if (h[d].test(m)) { l[d] = m, c = d; break } } if (g > b.length) break } else l[d] == b.charAt(g) && d != i && (g++, c = d); if (!a && c + 1 < i) f.val(""), t(0, k); else if (a || c + 1 >= i) u(), a || f.val(f.val().substring(0, c + 1)); return i ? d : j } function u() { return f.val(l.join("")).val() } function t(a, b) { for (var c = a; c < b && c < k; c++) h[c] && (l[c] = e.placeholder) } function s(a) { var b = a.which, c = f.caret(); if (a.ctrlKey || a.altKey || a.metaKey || b < 32) return !0; if (b) { c.end - c.begin != 0 && (t(c.begin, c.end), p(c.begin, c.end - 1)); var d = n(c.begin - 1); if (d < k) { var g = String.fromCharCode(b); if (h[d].test(g)) { q(d), l[d] = g, u(); var i = n(d); f.caret(i), e.completed && i >= k && e.completed.call(f) } } return !1 } } function r(a) { var b = a.which; if (b == 8 || b == 46 || c && b == 127) { var d = f.caret(), e = d.begin, g = d.end; g - e == 0 && (e = b != 46 ? o(e) : g = n(e - 1), g = b == 46 ? n(g) : g), t(e, g), p(e, g - 1); return !1 } if (b == 27) { f.val(m), f.caret(0, v()); return !1 } } function q(a) { for (var b = a, c = e.placeholder; b < k; b++) if (h[b]) { var d = n(b), f = l[b]; l[b] = c; if (d < k && h[d].test(f)) c = f; else break } } function p(a, b) { if (!(a < 0)) { for (var c = a, d = n(b) ; c < k; c++) if (h[c]) { if (d < k && h[c].test(l[d])) l[c] = l[d], l[d] = e.placeholder; else break; d = n(d) } u(), f.caret(Math.max(j, a)) } } function o(a) { while (--a >= 0 && !h[a]); return a } function n(a) { while (++a <= k && !h[a]); return a } var f = a(this), l = a.map(d.split(""), function (a, b) { if (a != "?") return g[a] ? e.placeholder : a }), m = f.val(); f.data(a.mask.dataName, function () { return a.map(l, function (a, b) { return h[b] && a != e.placeholder ? a : null }).join("") }), f.attr("readonly") || f.one("unmask", function () { f.unbind(".mask").removeData(a.mask.dataName) }).bind("focus.mask", function () { m = f.val(); var b = v(); u(); var c = function () { b == d.length ? f.caret(0, b) : f.caret(b) }; (a.browser.msie ? c : function () { setTimeout(c, 0) })() }).bind("blur.mask", function () { v(), f.val() != m && f.change() }).bind("keydown.mask", r).bind("keypress.mask", s).bind(b, function () { setTimeout(function () { f.caret(v(!0)) }, 0) }), v() }) } }) })(jQuery);

	jQuery.mask.type = {
	    'data': '99/99/9999',
	    'hora': '99:99',
	    'telefone': '(99) 9999-9999?9',
	    'cep': '99999-999',
	    'cpf': '999.999.999-99',
	    'cnpj': '99.999.999/9999-99',
        'numero': '?999999999',
		'dia': '?99',
        'mes': '99',
        'ano': '9999'
	};

});
	
